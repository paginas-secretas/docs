<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="887px" preserveAspectRatio="none" style="width:1295px;height:887px;background:#FFFFFF;" version="1.1" viewBox="0 0 1295 887" width="1295px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="29.0679" id="_title" style="stroke:none;stroke-width:1.0;" width="174" x="559.75" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="164" x="564.75" y="29.9659">002 - Share contacts list</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="124.1358" y2="804.2562"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="314" x2="314" y1="124.1358" y2="804.2562"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="733" x2="733" y1="124.1358" y2="804.2562"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="859" x2="859" y1="124.1358" y2="804.2562"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1209.5" x2="1209.5" y1="124.1358" y2="804.2562"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="120.0339">User</text><ellipse cx="23.5" cy="53.5679" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,61.5679 L23.5,88.5679 M10.5,69.5679 L36.5,69.5679 M23.5,88.5679 L10.5,103.5679 M23.5,88.5679 L36.5,103.5679 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="818.2221">User</text><ellipse cx="23.5" cy="830.8241" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,838.8241 L23.5,865.8241 M10.5,846.8241 L36.5,846.8241 M23.5,865.8241 L10.5,880.8241 M23.5,865.8241 L36.5,880.8241 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FFE4E1" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="279" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="286" y="112.0339">Platform</text><rect fill="#FFE4E1" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="279" y="803.2562"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="286" y="825.2221">Platform</text><rect fill="#F5FFFA" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="699" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="706" y="112.0339">Browser</text><rect fill="#F5FFFA" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="699" y="803.2562"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="706" y="825.2221">Browser</text><rect fill="#DDA0DD" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="778" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="785" y="112.0339">Contacts Manager API</text><rect fill="#DDA0DD" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="778" y="803.2562"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="785" y="825.2221">Contacts Manager API</text><rect fill="#DDA0DD" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="1129.5" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1136.5" y="112.0339">Contacts Manager DB</text><rect fill="#DDA0DD" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="1129.5" y="803.2562"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1136.5" y="825.2221">Contacts Manager DB</text><polygon fill="#181818" points="721.5,153.8419,731.5,157.8419,721.5,161.8419,725.5,157.8419" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="727.5" y1="157.8419" y2="157.8419"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="30.5" y="152.0328">Open platform webpage</text><polygon fill="#181818" points="325.5,185.5479,315.5,189.5479,325.5,193.5479,321.5,189.5479" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="319.5" x2="732.5" y1="189.5479" y2="189.5479"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="331.5" y="183.7389">GET /index.html</text><polygon fill="#181818" points="34.5,217.2539,24.5,221.2539,34.5,225.2539,30.5,221.2539" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="313.5" y1="221.2539" y2="221.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="40.5" y="215.4449">Render created contacts lists</text><polygon fill="#181818" points="302.5,248.9599,312.5,252.9599,302.5,256.9599,306.5,252.9599" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="308.5" y1="252.9599" y2="252.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="30.5" y="247.1509">Select contacts list to share</text><polygon fill="#181818" points="34.5,280.6659,24.5,284.6659,34.5,288.6659,30.5,284.6659" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="313.5" y1="284.6659" y2="284.6659"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="40.5" y="278.8569">Render contacts list</text><polygon fill="#181818" points="302.5,312.3719,312.5,316.3719,302.5,320.3719,306.5,316.3719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="308.5" y1="316.3719" y2="316.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="30.5" y="310.5629">Select share contacts list button</text><polygon fill="#181818" points="34.5,344.0779,24.5,348.0779,34.5,352.0779,30.5,348.0779" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="313.5" y1="348.0779" y2="348.0779"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267" x="40.5" y="342.2689">Prompt sharing user public (asymmetric) key</text><polygon fill="#181818" points="302.5,375.784,312.5,379.784,302.5,383.784,306.5,379.784" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="308.5" y1="379.784" y2="379.784"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="30.5" y="373.975">Inserts sharing user public key</text><polygon fill="#181818" points="721.5,407.49,731.5,411.49,721.5,415.49,725.5,411.49" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="314.5" x2="727.5" y1="411.49" y2="411.49"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="321.5" y="405.681">Generate private key (symmetric)</text><polygon fill="#181818" points="325.5,439.196,315.5,443.196,325.5,447.196,321.5,443.196" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="319.5" x2="732.5" y1="443.196" y2="443.196"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="331.5" y="437.387">Returns (private) key</text><polygon fill="#181818" points="721.5,470.902,731.5,474.902,721.5,478.902,725.5,474.902" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="314.5" x2="727.5" y1="474.902" y2="474.902"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="321.5" y="469.093">Encrypt contacts list with private (symmetric) key</text><polygon fill="#181818" points="721.5,502.608,731.5,506.608,721.5,510.608,725.5,506.608" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="314.5" x2="727.5" y1="506.608" y2="506.608"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="391" x="321.5" y="500.799">Encrypt private (symmetric) key with user public (asymmetric) key</text><polygon fill="#181818" points="325.5,534.314,315.5,538.314,325.5,542.314,321.5,538.314" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="319.5" x2="732.5" y1="538.314" y2="538.314"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395" x="331.5" y="532.505">JSON { encrypted contacts list, encrypted (symmetric) private key }</text><polygon fill="#181818" points="847.5,566.0201,857.5,570.0201,847.5,574.0201,851.5,570.0201" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="314.5" x2="853.5" y1="570.0201" y2="570.0201"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="489" x="321.5" y="564.2111">POST /contacts JSON { encrypted contacts list, encrypted (symmetric) private key }</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="859.5" x2="901.5" y1="601.7261" y2="601.7261"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="901.5" x2="901.5" y1="601.7261" y2="614.7261"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="860.5" x2="901.5" y1="614.7261" y2="614.7261"/><polygon fill="#181818" points="870.5,610.7261,860.5,614.7261,870.5,618.7261,866.5,614.7261" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="866.5" y="595.9171">Generate document reference</text><polygon fill="#181818" points="1197.5,642.4321,1207.5,646.4321,1197.5,650.4321,1201.5,646.4321" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="859.5" x2="1203.5" y1="646.4321" y2="646.4321"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326" x="866.5" y="640.6231">Save encrypted contacts list using document reference</text><polygon fill="#181818" points="870.5,674.1381,860.5,678.1381,870.5,682.1381,866.5,678.1381" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="864.5" x2="1208.5" y1="678.1381" y2="678.1381"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="876.5" y="672.3291">Saved document hash (commit hash)</text><polygon fill="#181818" points="325.5,705.8441,315.5,709.8441,325.5,713.8441,321.5,709.8441" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="319.5" x2="858.5" y1="709.8441" y2="709.8441"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="331.5" y="704.0351">JSON { document reference, document hash }</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="314.5" x2="356.5" y1="741.5501" y2="741.5501"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="356.5" x2="356.5" y1="741.5501" y2="754.5501"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="315.5" x2="356.5" y1="754.5501" y2="754.5501"/><polygon fill="#181818" points="325.5,750.5501,315.5,754.5501,325.5,758.5501,321.5,754.5501" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="321.5" y="735.7411">Build shared contacts list link</text><polygon fill="#181818" points="34.5,782.2562,24.5,786.2562,34.5,790.2562,30.5,786.2562" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="313.5" y1="786.2562" y2="786.2562"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="40.5" y="780.4472">Render contacts list URL</text><!--MD5=[38708dc6ef3861e1b96639b816a80cc6]
@startuml 002-share-contacts-list

title "002 - Share contacts list"

actor User
participant "Platform" as PL #MistyRose
participant Browser #MintCream
participant "Contacts Manager API" as CNT #Plum
participant "Contacts Manager DB" as CNT_DB #Plum

User -> Browser : Open platform webpage
Browser -> PL : GET /index.html
PL - -> User: Render created contacts lists

User -> PL: Select contacts list to share
PL - -> User: Render contacts list

User -> PL: Select share contacts list button
PL - -> User: Prompt sharing user public (asymmetric) key
User -> PL: Inserts sharing user public key

PL -> Browser: Generate private key (symmetric)
Browser - -> PL: Returns (private) key

PL -> Browser: Encrypt contacts list with private (symmetric) key
PL -> Browser: Encrypt private (symmetric) key with user public (asymmetric) key
Browser - -> PL: JSON { encrypted contacts list, encrypted (symmetric) private key }

PL -> CNT: POST /contacts JSON { encrypted contacts list, encrypted (symmetric) private key }
CNT - -> CNT: Generate document reference
CNT -> CNT_DB: Save encrypted contacts list using document reference
CNT_DB - -> CNT: Saved document hash (commit hash)
CNT - -> PL: JSON { document reference, document hash }

PL - -> PL: Build shared contacts list link
PL - -> User: Render contacts list URL

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>