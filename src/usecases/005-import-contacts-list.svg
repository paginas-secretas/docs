<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="800px" preserveAspectRatio="none" style="width:1228px;height:800px;background:#FFFFFF;" version="1.1" viewBox="0 0 1228 800" width="1228px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="29.0679" id="_title" style="stroke:none;stroke-width:1.0;" width="184" x="521.25" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="174" x="526.25" y="29.9659">005 - Import contacts list</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="124.1358" y2="716.4321"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="243" x2="243" y1="124.1358" y2="716.4321"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="579" x2="579" y1="124.1358" y2="716.4321"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="792" x2="792" y1="124.1358" y2="716.4321"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1142.5" x2="1142.5" y1="124.1358" y2="716.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="120.0339">User</text><ellipse cx="23.5" cy="53.5679" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,61.5679 L23.5,88.5679 M10.5,69.5679 L36.5,69.5679 M23.5,88.5679 L10.5,103.5679 M23.5,88.5679 L36.5,103.5679 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="730.398">User</text><ellipse cx="23.5" cy="743" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,751 L23.5,778 M10.5,759 L36.5,759 M23.5,778 L10.5,793 M23.5,778 L36.5,793 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FFE4E1" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="208" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="215" y="112.0339">Platform</text><rect fill="#FFE4E1" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="208" y="715.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="215" y="737.398">Platform</text><rect fill="#F5FFFA" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="545" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="552" y="112.0339">Browser</text><rect fill="#F5FFFA" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="545" y="715.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="552" y="737.398">Browser</text><rect fill="#DDA0DD" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="711" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="718" y="112.0339">Contacts Manager API</text><rect fill="#DDA0DD" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="711" y="715.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="718" y="737.398">Contacts Manager API</text><rect fill="#DDA0DD" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="1062.5" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1069.5" y="112.0339">Contacts Manager DB</text><rect fill="#DDA0DD" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="1062.5" y="715.4321"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1069.5" y="737.398">Contacts Manager DB</text><polygon fill="#181818" points="231.5,153.8419,241.5,157.8419,231.5,161.8419,235.5,157.8419" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="237.5" y1="157.8419" y2="157.8419"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="30.5" y="152.0328">Clicks import contacts list button</text><polygon fill="#181818" points="567.5,185.5479,577.5,189.5479,567.5,193.5479,571.5,189.5479" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="243.5" x2="573.5" y1="189.5479" y2="189.5479"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="250.5" y="183.7389">Generate private and public key</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="579.5" x2="621.5" y1="221.2539" y2="221.2539"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="621.5" x2="621.5" y1="221.2539" y2="234.2539"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580.5" x2="621.5" y1="234.2539" y2="234.2539"/><polygon fill="#181818" points="590.5,230.2539,580.5,234.2539,590.5,238.2539,586.5,234.2539" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="586.5" y="215.4449">Save public key in local database</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="579.5" x2="621.5" y1="265.9599" y2="265.9599"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="621.5" x2="621.5" y1="265.9599" y2="278.9599"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580.5" x2="621.5" y1="278.9599" y2="278.9599"/><polygon fill="#181818" points="590.5,274.9599,580.5,278.9599,590.5,282.9599,586.5,278.9599" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="586.5" y="260.1509">Save private key in local database</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="579.5" x2="621.5" y1="310.6659" y2="310.6659"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="621.5" x2="621.5" y1="310.6659" y2="323.6659"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580.5" x2="621.5" y1="323.6659" y2="323.6659"/><polygon fill="#181818" points="590.5,319.6659,580.5,323.6659,590.5,327.6659,586.5,323.6659" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="586.5" y="304.8569">Download private key</text><polygon fill="#181818" points="254.5,351.3719,244.5,355.3719,254.5,359.3719,250.5,355.3719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="248.5" x2="578.5" y1="355.3719" y2="355.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="260.5" y="349.5629">Returns public key</text><polygon fill="#181818" points="567.5,383.0779,577.5,387.0779,567.5,391.0779,571.5,387.0779" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="243.5" x2="573.5" y1="387.0779" y2="387.0779"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="250.5" y="381.2689">Encrypt local database with private key</text><polygon fill="#181818" points="254.5,414.784,244.5,418.784,254.5,422.784,250.5,418.784" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="248.5" x2="578.5" y1="418.784" y2="418.784"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="260.5" y="412.975">JSON { encrypted contacts list }</text><polygon fill="#181818" points="780.5,446.49,790.5,450.49,780.5,454.49,784.5,450.49" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="243.5" x2="786.5" y1="450.49" y2="450.49"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="250.5" y="444.681">POST /contacts JSON { encrypted contacts list }</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="792.5" x2="834.5" y1="482.196" y2="482.196"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="834.5" x2="834.5" y1="482.196" y2="495.196"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="793.5" x2="834.5" y1="495.196" y2="495.196"/><polygon fill="#181818" points="803.5,491.196,793.5,495.196,803.5,499.196,799.5,495.196" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="799.5" y="476.387">Generate document reference</text><polygon fill="#181818" points="1130.5,522.902,1140.5,526.902,1130.5,530.902,1134.5,526.902" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="792.5" x2="1136.5" y1="526.902" y2="526.902"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326" x="799.5" y="521.093">Save encrypted contacts list using document reference</text><polygon fill="#181818" points="803.5,554.608,793.5,558.608,803.5,562.608,799.5,558.608" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="797.5" x2="1141.5" y1="558.608" y2="558.608"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="809.5" y="552.799">Saved document hash (commit hash)</text><polygon fill="#181818" points="254.5,586.314,244.5,590.314,254.5,594.314,250.5,590.314" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="248.5" x2="791.5" y1="590.314" y2="590.314"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="260.5" y="584.505">JSON { document reference, document hash }</text><polygon fill="#181818" points="567.5,618.0201,577.5,622.0201,567.5,626.0201,571.5,622.0201" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="243.5" x2="573.5" y1="622.0201" y2="622.0201"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="250.5" y="616.2111">Save document reference and hash in local database</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="243.5" x2="285.5" y1="653.7261" y2="653.7261"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="285.5" x2="285.5" y1="653.7261" y2="666.7261"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="244.5" x2="285.5" y1="666.7261" y2="666.7261"/><polygon fill="#181818" points="254.5,662.7261,244.5,666.7261,254.5,670.7261,250.5,666.7261" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="250.5" y="647.9171">Generate shared contacts list link</text><polygon fill="#181818" points="34.5,694.4321,24.5,698.4321,34.5,702.4321,30.5,698.4321" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="28.5" x2="242.5" y1="698.4321" y2="698.4321"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="40.5" y="692.6231">Render saved contacts list link</text><!--MD5=[7cfebc7d3b0257933f65c0e6d8287773]
@startuml 005-import-contacts-list

title "005 - Import contacts list"

actor User
participant "Platform" as PL #MistyRose
participant Browser #MintCream
participant "Contacts Manager API" as CNT #Plum
participant "Contacts Manager DB" as CNT_DB #Plum

User -> PL: Clicks import contacts list button
PL -> Browser: Generate private and public key
Browser - -> Browser: Save public key in local database
Browser - -> Browser: Save private key in local database
Browser - -> Browser: Download private key
Browser - -> PL: Returns public key

PL -> Browser: Encrypt local database with private key
Browser - -> PL: JSON { encrypted contacts list }
PL -> CNT: POST /contacts JSON { encrypted contacts list }
CNT - -> CNT: Generate document reference
CNT -> CNT_DB: Save encrypted contacts list using document reference
CNT_DB - -> CNT: Saved document hash (commit hash)
CNT - -> PL: JSON { document reference, document hash }
PL -> Browser: Save document reference and hash in local database
PL - -> PL: Generate shared contacts list link
PL - -> User: Render saved contacts list link

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>